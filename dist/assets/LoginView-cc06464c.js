import{d as k,u as y,L as b,M as i,D as v,_ as f,r as g,o as _,c as x,a as s,b as w,t as S,i as C,w as p,v as u}from"./index-d249554b.js";import{m as h}from"./mainRepositories-09f24805.js";import{S as m}from"./setFormDataUtils-e6455cf7.js";import"./axios-4a70c6fc.js";const D=k("auth",{state:()=>({data:null}),actions:{async login({router:a,kode_sekolah:e,nip:l,password:c}){localStorage.clear();const t=y();try{t.Loading();const n=m.setFormData({kode_sekolah:e,nip:l,password:c}),r=await h.login(n),o=new b(r.data);if(o.is_correct){const d=await this.dataUser(o);d.is_correct==!0?(i.setDataLogin({kode_sekolah:e,nip:l,password:c}),i.setLoginResponse(o),i.setDataUser(d),t.Success(),a.push({name:"home"})):t.Error("something wrong")}else t.Error(r.data.message)}catch(n){t.Error(n.message)}},async dataUser(a){const e=m.setFormData({kode_sekolah:a.kode_sekolah,id_pegawai:a.id_pegawai}),l=await h.dataUser(e);return new v(l.data)},logout({globalStore:a}){this.loggedIn=!1,a.clearMessages()}}});const L={name:"PasswordContainer",data(){return{isClicked:!1}},props:{title:String,value:String},emits:["update:value"]},U={class:"relative w-full"},P={class:"relative mt-4"},V={class:"absolute inset-y-0 right-0 flex items-center pe-2"},B=["type","value"],R={for:"",class:"absolute text-sm text-gray-500 font-mulish duration-300 transform -translate-y-4 scale-95 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1"};function j(a,e,l,c,t,n){const r=g("font-awesome-icon");return _(),x("div",U,[s("div",P,[s("div",V,[s("button",{onClick:e[0]||(e[0]=o=>t.isClicked=!t.isClicked)},[w(r,{icon:["fas",t.isClicked?"eye":"eye-slash"],class:"ps-10"},null,8,["icon"])])]),s("input",{type:t.isClicked?"text":"password",value:l.value,onInput:e[1]||(e[1]=o=>a.$emit("update:value",o.target.value)),class:"font-mulish block px-2.5 pb-2.5 pt-4 w-full text-lg text-gray-900 bg-transparent rounded-lg border-2 border-gray-400 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" "},null,40,B),s("label",R,S(l.title),1)])])}const A=f(L,[["render",j]]),E="/assets/adminsekolah-a43c7c2b.png",M={name:"LoginView",components:{PasswordContainer:A},data(){return{state:C("state"),kode_sekolah:null,password:null,nip:null,authStore:D()}},mounted(){this.setSession()},methods:{async login(){await this.authStore.login({router:this.$router,kode_sekolah:this.kode_sekolah,password:this.password,nip:this.nip})},setSession(){const a=i.getDataLogin();a!=null?(this.kode_sekolah=a.kode_sekolah,this.password=a.password,this.nip=a.nip):(this.kode_sekolah=null,this.password=null,this.nip=null)},clearSession(){this.state.Loading(),i.clear(),this.setSession(),setTimeout(()=>{this.state.Success()},1e3)}}},F={class:"flex flex-col w-full h-screen"},I={class:"flex items-center justify-center flex-grow"},N={class:"container pt-2"},H=s("div",{class:"flex flex-row justify-center w-full"},[s("img",{src:E,alt:"",class:"w-20 h-20"})],-1),T=s("p",{class:"text-center text-[15px] font-mulish font-[600] pt-6"},"Assalamu'alaikum Selamat Datang Di",-1),$=s("p",{class:"text-center text-[20px] font-mulish font-bold"},"Admin Sekolah",-1),z={class:"container flex flex-col pt-10 item-center gap-y-5"},K=s("footer",{class:"sticky bottom-0 flex flex-col h-20 pb-6 gap-y-3"},[s("p",{class:"text-center text-[13px] font-mulish"},"Butuh Bantuan ?"),s("p",{class:"text-center text-[15px] font-mulish text-primaryColors"},"Hubungi Admin")],-1);function q(a,e,l,c,t,n){const r=g("PasswordContainer");return _(),x("div",F,[s("main",I,[s("div",N,[H,T,$,s("div",z,[p(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.kode_sekolah=o),type:"text",class:"px-2 py-3 mb-3 border-2 border-gray-400 rounded-lg font-mulish",placeholder:"Kode Sekolah"},null,512),[[u,t.kode_sekolah]]),p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.nip=o),type:"text",class:"px-2 py-3 border-2 border-gray-400 rounded-lg font-mulish",placeholder:"NIS"},null,512),[[u,t.nip]]),w(r,{value:t.password,"onUpdate:value":e[2]||(e[2]=o=>t.password=o),title:"Password"},null,8,["value"]),s("button",{onClick:e[3]||(e[3]=(...o)=>n.login&&n.login(...o)),class:"w-full h-12 text-white border-2 rounded-full bg-primaryColors"},"Lanjut"),s("button",{onClick:e[4]||(e[4]=(...o)=>n.clearSession&&n.clearSession(...o)),class:"text-center font-mulish text-primaryColors text-md"},"Hapus Riwayat")])])]),K])}const W=f(M,[["render",q]]);export{W as default};
